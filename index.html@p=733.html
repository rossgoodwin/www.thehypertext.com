<!DOCTYPE html>
<html lang="en-US">
	<head>
	    <link href='http://fonts.googleapis.com/css?family=Cousine|Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>THE HYPERTEXT</title>
		<meta http-equiv="Content-language" content="en-US" />
		<link rel="profile" href="http://gmpg.org/xfn/11" />
		<link rel="shortcut icon" href="wp-content/themes/sight/images/favico.ico" type="image/x-icon" />
		<script type='text/javascript'>function ctSetCookie(c_name, value, def_value){document.cookie = c_name + '=' + escape(value) + '; path=/';}ctSetCookie('ct_checkjs', '197926104', '0');</script><link rel='dns-prefetch' href='http://s.w.org/' />
<link rel="alternate" type="application/rss+xml" title="THE HYPERTEXT &raquo; Feed" href="feed/index.html" />
<link rel='stylesheet' id='crayon-css'  href='wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css@ver=_2.7.2_beta.css' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-classic-css'  href='wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css@ver=_2.7.2_beta.css' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css@ver=_2.7.2_beta.css' type='text/css' media='all' />
<link rel='stylesheet' id='wp-block-library-css'  href='wp-includes/css/dist/block-library/style.min.css@ver=5.0.4.css' type='text/css' media='all' />
<link rel='stylesheet' id='sight-style-css'  href='wp-content/themes/sight/style.css@ver=5.0.4.css' type='text/css' media='all' />
<!--[if IE]>
<link rel='stylesheet' id='sight-ie-css'  href='http://www.thehypertext.com/wp-content/themes/sight/ie.css?ver=20131217' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='wp-includes/js/jquery/jquery.js@ver=1.12.4'></script>
<script type='text/javascript' src='wp-includes/js/jquery/jquery-migrate.min.js@ver=1.4.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/www.thehypertext.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js@ver=_2.7.2_beta'></script>
<script type='text/javascript' src='wp-content/plugins/cleantalk-spam-protect/js/apbct-public.js@ver=5.114'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var ctNocache = {"ajaxurl":"http:\/\/www.thehypertext.com\/wp-admin\/admin-ajax.php","info_flag":"","set_cookies_flag":"","blog_home":"http:\/\/www.thehypertext.com\/"};
/* ]]> */
</script>
<script type='text/javascript' src='wp-content/plugins/cleantalk-spam-protect/inc/cleantalk_nocache.js@ver=5.114'></script>
<script type='text/javascript' src='wp-content/themes/sight/js/jquery.cycle.all.min.js@ver=20131219'></script>
<script type='text/javascript' src='wp-content/themes/sight/js/jquery.cookie.js@ver=20131219'></script>
<link rel='https://api.w.org/' href='wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="xmlrpc.php@rsd" />
<link rel='prev' title='So it goes.' href='index.html@p=717.html' />
<link rel='next' title='Sound Camera, Part III' href='index.html@p=741.html' />
<meta name="generator" content="WordPress 5.0.4" />
<link rel="canonical" href="index.html@p=733.html" />
<link rel='shortlink' href='index.html@p=733.html' />
<link rel="alternate" type="application/json+oembed" href="wp-json/oembed/1.0/embed@url=http%253A%252F%252Fwww.thehypertext.com%252F2015%252F10%252F06%252Fsound-camera-part-ii%252F" />
<link rel="alternate" type="text/xml+oembed" href="wp-json/oembed/1.0/embed@url=http%253A%252F%252Fwww.thehypertext.com%252F2015%252F10%252F06%252Fsound-camera-part-ii%252F&amp;format=xml" />
		        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-50113889-5', 'auto');
          ga('send', 'pageview');

        </script>
	</head>
	<body class="post-template-default single single-post postid-733 single-format-standard">
		<div class="wrapper">
			<div class="header clear">
				<div class="logo">
					<p class="th_logo_titletags">&lt;title&gt;</p>
					<p class="th_logo">&nbsp;&nbsp;<a class="th_logo_link" href="index.html">THE HYPERTEXT</a></p>
					<p class="th_logo_titletags">&lt;&#47;title&gt;</p>
					<p class="th_logo_rg">&lt;&#33;-- <a class="th_logo_link" href="http://rossgoodwin.com">Ross Goodwin</a> @ <a class="th_logo_link" href="http://itp.nyu.edu">ITP</a> --&gt;</p>
				</div>

				
				<div class="search_form">
	<form method="get" id="searchform" action="index.html">
		<fieldset>
			<input name="s" type="text" onfocus="if(this.value=='Search') this.value='';" onblur="if(this.value=='') this.value='Search';" value="Search" />
			<button type="submit"></button>
		</fieldset>
	</form>
</div>

							</div>

			<div class="nav"><ul id="dd" class="dd"><li id="menu-item-617" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-617"><a href="category/fall-2015/data-personal/index.html">Data Personalization</a></li>
<li id="menu-item-619" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-619"><a href="category/fall-2015/a-to-z/index.html">Programming A to Z</a></li>
<li id="menu-item-621" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-621"><a href="category/fall-2015/temp-exp/index.html">Temporary Expert</a></li>
<li id="menu-item-620" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-620"><a href="category/fall-2015/project-dev/index.html">Project Development Studio</a></li>
<li id="menu-item-768" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-768"><a href="category/fall-2015/learning-machines/index.html">Learning Machines</a></li>
</ul></div>
			
			<!-- Container -->
			<div id="container" class="clear">
				<!-- Content -->
				<div id="content">
			
		<div class="content-title">
			<a href="category/fall-2015/project-dev/index.html" rel="category tag">Project Development Studio</a>			<a href="http://facebook.com/share.php?u=http://www.thehypertext.com/2015/10/06/sound-camera-part-ii/&amp;t=Sound+Camera%2C+Part+II" target="_blank" class="f" title="Share on Facebook"></a>
			<a href="http://twitter.com/home?status=Sound Camera, Part II http://tinyurl.com/nn3v9b5" target="_blank" class="t" title="Spread the word on Twitter"></a>
			<a href="http://digg.com/submit?phase=2&amp;url=http://www.thehypertext.com/2015/10/06/sound-camera-part-ii/&amp;title=Sound Camera, Part II" target="_blank" class="di" title="Bookmark on Del.icio.us"></a>
			<a href="http://stumbleupon.com/submit?url=http://www.thehypertext.com/2015/10/06/sound-camera-part-ii/&amp;title=Sound+Camera%2C+Part+II" target="_blank" class="su" title="Share on StumbleUpon"></a>
		</div>

		<div class="entry">
			<div class="single clear post-733 post type-post status-publish format-standard has-post-thumbnail hentry category-project-dev tag-art tag-artifical-intelligence tag-clarifai tag-code tag-gps tag-image tag-interactive tag-neural-networks tag-programming tag-python tag-raspberry-pi tag-sound-camera tag-word-camera" id="post_733">
				<div class="post-meta">
					<h1>Sound Camera, Part II</h1>
					by <span class="post-author"><a href="author/rg/index.html" title="Posts by rg">rg</a></span> on <span class="post-date">Oct 6, 2015</span> &bull; <span>2:20 am</span>					<a
						href="index.html@p=733.html#comments" class="post-comms">No Comments</a></div>
				<div class="post-content"><p>Using JavaScript and Python Flask, I created a functional software prototype of the Sound Camera: <a href="http://rossgoodwin.com/soundcamera" target="_blank">rossgoodwin.com/soundcamera</a></p>
<p>The front-end JavaScript code is available <a href="https://github.com/rossgoodwin/soundcamera" target="_blank">on GitHub</a>. Here is the primary back-end Python code:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5d4ba58337bc9885757486" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title">__init__.py</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
import os
import json
import uuid
from base64 import decodestring
import time
from random import choice as rc
from random import sample as rs
import re

import PIL
from PIL import Image
import requests
import exifread

from flask import Flask, request, abort, jsonify
from flask.ext.cors import CORS
from werkzeug import secure_filename

from clarifai.client import ClarifaiApi

app = Flask(__name__)
CORS(app)

app.config['UPLOAD_FOLDER'] = '/var/www/SoundCamera/SoundCamera/static/img'
IMGPATH = '/var/www/SoundCamera/SoundCamera/static/img/'

clarifai_api = ClarifaiApi()

@app.route("/")
def index():
    return "These aren't the droids you're looking for."

@app.route("/img", methods=["POST"])
def img():
	request.get_data()
	if request.method == "POST":
		f = request.files['file']
		if f:
			filename = secure_filename(f.filename)
			f.save(os.path.join(app.config['UPLOAD_FOLDER'], filename))
			new_filename = resize_image(filename)
			return jsonify(uri=main(new_filename))
		else:
			abort(501)

@app.route("/b64", methods=["POST"])
def base64():
	if request.method == "POST":
		fstring = request.form['base64str']
		filename = str(uuid.uuid4())+'.jpg'
		file_obj = open(IMGPATH+filename, 'w')
		file_obj.write(fstring.decode('base64'))
		file_obj.close()
		return jsonify(uri=main(filename))

@app.route("/url")
def url():
	img_url = request.args.get('url')
	response = requests.get(img_url, stream=True)
	orig_filename = img_url.split('/')[-1]
	if response.status_code == 200:
		with open(IMGPATH+orig_filename, 'wb') as f:
			for chunk in response.iter_content(1024):
				f.write(chunk)
		new_filename = resize_image(orig_filename)
		return jsonify(uri=main(new_filename))
	else:
		abort(500)


# def allowed_img_file(filename):
#     return '.' in filename and \
# 		filename.rsplit('.', 1)[1].lower() in set(['.jpg', '.jpeg', '.png'])

def resize_image(fn):
    longedge = 640
    orientDict = {
        1: (0, 1),
        2: (0, PIL.Image.FLIP_LEFT_RIGHT),
        3: (-180, 1),
        4: (0, PIL.Image.FLIP_TOP_BOTTOM),
        5: (-90, PIL.Image.FLIP_LEFT_RIGHT),
        6: (-90, 1),
        7: (90, PIL.Image.FLIP_LEFT_RIGHT),
        8: (90, 1)
    }

    imgOriList = []
    try:
        f = open(IMGPATH+fn, "rb")
        exifTags = exifread.process_file(f, details=False, stop_tag='Image Orientation')
        if 'Image Orientation' in exifTags:
            imgOriList.extend(exifTags['Image Orientation'].values)
    except:
        pass

    img = Image.open(IMGPATH+fn)
    w, h = img.size
    newName = str(uuid.uuid4())+'.jpeg'
    if w &gt;= h:
        wpercent = (longedge/float(w))
        hsize = int((float(h)*float(wpercent)))
        img = img.resize((longedge,hsize), PIL.Image.ANTIALIAS)
    else:
        hpercent = (longedge/float(h))
        wsize = int((float(w)*float(hpercent)))
        img = img.resize((wsize,longedge), PIL.Image.ANTIALIAS)

    for val in imgOriList:
        if val in orientDict:
            deg, flip = orientDict[val]
            img = img.rotate(deg)
            if flip != 1:
                img = img.transpose(flip)

    img.save(IMGPATH+newName, format='JPEG')
    os.remove(IMGPATH+fn)
    
    return newName

def chunks(l, n):
    """Yield successive n-sized chunks from l."""
    for i in xrange(0, len(l), n):
        yield l[i:i+n]

def get_tags(fp):
    fileObj = open(fp)
    result = clarifai_api.tag_images(fileObj)
    resultObj = result['results'][0]
    tags = resultObj['result']['tag']['classes']
    return tags

def genius_search(tags):
    access_token = 'd2IuV9fGKzYEWVnzmLVtFnm-EYvBQKR8Uh3I1cfZOdr8j-BGVTPThDES532dym5a'
    payload = {
        'q': ' '.join(tags),
        'access_token': access_token
    }
    endpt = 'http://api.genius.com/search'
    response = requests.get(endpt, params=payload)
    results = response.json()
    hits = results['response']['hits']
    
    artists_titles = []
    
    for h in hits:
        hit_result = h['result']
        if hit_result['url'].endswith('lyrics'):
            artists_titles.append(
                (hit_result['primary_artist']['name'], hit_result['title'])
            )
    
    return artists_titles

def spotify_search(query):
    endpt = "https://api.spotify.com/v1/search"
    payload = {
        'q': query,
        'type': 'track'
    }
    response = requests.get(endpt, params=payload)
    result = response.json()
    result_zero = result['tracks']['items'][0]
    
    return result_zero['uri']

def main(fn):
    tags = get_tags(IMGPATH+fn)
    for tag_chunk in chunks(tags,3):
        artists_titles = genius_search(tag_chunk)
        for artist, title in artists_titles:
            try:
                result_uri = spotify_search(artist+' '+title)
            except IndexError:
                pass
            else:
                return result_uri


if __name__ == "__main__":
    app.run()</textarea></div>
			<div class="crayon-main" style=" max-height: 500px;">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-2">2</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-4">4</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-6">6</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-8">8</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-10">10</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-12">12</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-14">14</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-16">16</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-18">18</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-20">20</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-22">22</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-24">24</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-26">26</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-28">28</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-30">30</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-32">32</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-34">34</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-36">36</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-38">38</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-40">40</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-42">42</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-44">44</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-46">46</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-48">48</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-50">50</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-52">52</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-54">54</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-56">56</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-58">58</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-60">60</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-62">62</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-64">64</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-66">66</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-68">68</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-70">70</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-72">72</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-74">74</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-76">76</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-78">78</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-80">80</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-82">82</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-84">84</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-86">86</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-88">88</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-90">90</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-92">92</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-94">94</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-96">96</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-98">98</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-99">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-100">100</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-101">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-102">102</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-103">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-104">104</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-105">105</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-106">106</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-107">107</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-108">108</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-109">109</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-110">110</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-111">111</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-112">112</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-113">113</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-114">114</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-115">115</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-116">116</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-117">117</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-118">118</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-119">119</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-120">120</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-121">121</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-122">122</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-123">123</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-124">124</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-125">125</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-126">126</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-127">127</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-128">128</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-129">129</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-130">130</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-131">131</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-132">132</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-133">133</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-134">134</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-135">135</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-136">136</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-137">137</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-138">138</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-139">139</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-140">140</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-141">141</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-142">142</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-143">143</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-144">144</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-145">145</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-146">146</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-147">147</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-148">148</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-149">149</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-150">150</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-151">151</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-152">152</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-153">153</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-154">154</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-155">155</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-156">156</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-157">157</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-158">158</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-159">159</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-160">160</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-161">161</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-162">162</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-163">163</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-164">164</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-165">165</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-166">166</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-167">167</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-168">168</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-169">169</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-170">170</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-171">171</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-172">172</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-173">173</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-174">174</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-175">175</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-176">176</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-177">177</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-178">178</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-179">179</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d4ba58337bc9885757486-180">180</div><div class="crayon-num" data-line="crayon-5d4ba58337bc9885757486-181">181</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-1"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">os</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-2"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">json</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-3"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">uuid</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-4"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-k ">base64</span><span class="crayon-h"> </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">decodestring</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-5"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">time</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-6"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-k ">random</span><span class="crayon-h"> </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">choice </span><span class="crayon-st">as</span><span class="crayon-h"> </span><span class="crayon-e">rc</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-7"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-k ">random</span><span class="crayon-h"> </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">sample </span><span class="crayon-st">as</span><span class="crayon-h"> </span><span class="crayon-e">rs</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-8"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">re</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-10"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">PIL</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-11"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">PIL </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">Image</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-12"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">requests</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-13"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">exifread</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-14">&nbsp;</div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-15"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">flask </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">Flask</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">abort</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">jsonify</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-16"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">flask</span><span class="crayon-sy">.</span><span class="crayon-v">ext</span><span class="crayon-sy">.</span><span class="crayon-e">cors </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">CORS</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-17"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">werkzeug </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">secure_filename</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-18">&nbsp;</div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-19"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">clarifai</span><span class="crayon-sy">.</span><span class="crayon-e">client </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">ClarifaiApi</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-20">&nbsp;</div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-21"><span class="crayon-v">app</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Flask</span><span class="crayon-sy">(</span><span class="crayon-v">__name__</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-22"><span class="crayon-e">CORS</span><span class="crayon-sy">(</span><span class="crayon-v">app</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-23">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-24"><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'UPLOAD_FOLDER'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'/var/www/SoundCamera/SoundCamera/static/img'</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-25"><span class="crayon-v">IMGPATH</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'/var/www/SoundCamera/SoundCamera/static/img/'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-26">&nbsp;</div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-27"><span class="crayon-v">clarifai_api</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ClarifaiApi</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-28">&nbsp;</div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-29"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">"/"</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-30"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">index</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-s">"These aren't the droids you're looking for."</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-32">&nbsp;</div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-33"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">"/img"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">methods</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-s">"POST"</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-34"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">img</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-35"><span class="crayon-h">	</span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">get_data</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-36"><span class="crayon-h">	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">method</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">"POST"</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-37"><span class="crayon-h">		</span><span class="crayon-v">f</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">files</span><span class="crayon-sy">[</span><span class="crayon-s">'file'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-38"><span class="crayon-h">		</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">f</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-39"><span class="crayon-h">			</span><span class="crayon-v">filename</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">secure_filename</span><span class="crayon-sy">(</span><span class="crayon-v">f</span><span class="crayon-sy">.</span><span class="crayon-v">filename</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-40"><span class="crayon-h">			</span><span class="crayon-v">f</span><span class="crayon-sy">.</span><span class="crayon-e">save</span><span class="crayon-sy">(</span><span class="crayon-k ">os.path</span><span class="crayon-sy">.</span><span class="crayon-e">join</span><span class="crayon-sy">(</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-v">config</span><span class="crayon-sy">[</span><span class="crayon-s">'UPLOAD_FOLDER'</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">filename</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-41"><span class="crayon-h">			</span><span class="crayon-v">new_filename</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">resize_image</span><span class="crayon-sy">(</span><span class="crayon-v">filename</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-42"><span class="crayon-h">			</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">jsonify</span><span class="crayon-sy">(</span><span class="crayon-v">uri</span><span class="crayon-o">=</span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-v">new_filename</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-43"><span class="crayon-h">		</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-44"><span class="crayon-h">			</span><span class="crayon-e">abort</span><span class="crayon-sy">(</span><span class="crayon-cn">501</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-45">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-46"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">"/b64"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">methods</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-s">"POST"</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-47"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-k ">base64</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-48"><span class="crayon-h">	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">method</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">"POST"</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-49"><span class="crayon-h">		</span><span class="crayon-v">fstring</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">form</span><span class="crayon-sy">[</span><span class="crayon-s">'base64str'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-50"><span class="crayon-h">		</span><span class="crayon-v">filename</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">str</span><span class="crayon-sy">(</span><span class="crayon-k ">uuid</span><span class="crayon-sy">.</span><span class="crayon-e">uuid4</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">+</span><span class="crayon-s">'.jpg'</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-51"><span class="crayon-h">		</span><span class="crayon-v">file_obj</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">open</span><span class="crayon-sy">(</span><span class="crayon-v">IMGPATH</span><span class="crayon-o">+</span><span class="crayon-v">filename</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'w'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-52"><span class="crayon-h">		</span><span class="crayon-v">file_obj</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">fstring</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'base64'</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-53"><span class="crayon-h">		</span><span class="crayon-v">file_obj</span><span class="crayon-sy">.</span><span class="crayon-e">close</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-54"><span class="crayon-h">		</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">jsonify</span><span class="crayon-sy">(</span><span class="crayon-v">uri</span><span class="crayon-o">=</span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-v">filename</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-55">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-56"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">"/url"</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-57"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">url</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-58"><span class="crayon-h">	</span><span class="crayon-v">img_url</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">args</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-s">'url'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-59"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">requests</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-v">img_url</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">stream</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-60"><span class="crayon-h">	</span><span class="crayon-v">orig_filename</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">img_url</span><span class="crayon-sy">.</span><span class="crayon-e">split</span><span class="crayon-sy">(</span><span class="crayon-s">'/'</span><span class="crayon-sy">)</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-61"><span class="crayon-h">	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-v">status_code</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-62"><span class="crayon-h">		</span><span class="crayon-st">with</span><span class="crayon-h"> </span><span class="crayon-k ">open</span><span class="crayon-sy">(</span><span class="crayon-v">IMGPATH</span><span class="crayon-o">+</span><span class="crayon-v">orig_filename</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'wb'</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">as</span><span class="crayon-h"> </span><span class="crayon-v">f</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-63"><span class="crayon-h">			</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-k ">chunk</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">iter_content</span><span class="crayon-sy">(</span><span class="crayon-cn">1024</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-64"><span class="crayon-h">				</span><span class="crayon-v">f</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-k ">chunk</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-65"><span class="crayon-h">		</span><span class="crayon-v">new_filename</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">resize_image</span><span class="crayon-sy">(</span><span class="crayon-v">orig_filename</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-66"><span class="crayon-h">		</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">jsonify</span><span class="crayon-sy">(</span><span class="crayon-v">uri</span><span class="crayon-o">=</span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-v">new_filename</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-67"><span class="crayon-h">	</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-68"><span class="crayon-h">		</span><span class="crayon-e">abort</span><span class="crayon-sy">(</span><span class="crayon-cn">500</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-69">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-70">&nbsp;</div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-71"><span class="crayon-c"># def allowed_img_file(filename):</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-72"><span class="crayon-c">#&nbsp;&nbsp;&nbsp;&nbsp; return '.' in filename and \</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-73"><span class="crayon-c"># 		filename.rsplit('.', 1)[1].lower() in set(['.jpg', '.jpeg', '.png'])</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-74">&nbsp;</div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-75"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">resize_image</span><span class="crayon-sy">(</span><span class="crayon-v">fn</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">longedge</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">640</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">orientDict</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-78"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">2</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">PIL</span><span class="crayon-sy">.</span><span class="crayon-v">Image</span><span class="crayon-sy">.</span><span class="crayon-v">FLIP_LEFT_RIGHT</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">3</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">-</span><span class="crayon-cn">180</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">4</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">PIL</span><span class="crayon-sy">.</span><span class="crayon-v">Image</span><span class="crayon-sy">.</span><span class="crayon-v">FLIP_TOP_BOTTOM</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">5</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">-</span><span class="crayon-cn">90</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">PIL</span><span class="crayon-sy">.</span><span class="crayon-v">Image</span><span class="crayon-sy">.</span><span class="crayon-v">FLIP_LEFT_RIGHT</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-83"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">6</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-o">-</span><span class="crayon-cn">90</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-84"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">7</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">90</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">PIL</span><span class="crayon-sy">.</span><span class="crayon-v">Image</span><span class="crayon-sy">.</span><span class="crayon-v">FLIP_LEFT_RIGHT</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-cn">8</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">90</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-86"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-87">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-88"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">imgOriList</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-89"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-90"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">f</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">open</span><span class="crayon-sy">(</span><span class="crayon-v">IMGPATH</span><span class="crayon-o">+</span><span class="crayon-v">fn</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"rb"</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-91"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">exifTags</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">exifread</span><span class="crayon-sy">.</span><span class="crayon-e">process_file</span><span class="crayon-sy">(</span><span class="crayon-v">f</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">details</span><span class="crayon-o">=</span><span class="crayon-t">False</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">stop_tag</span><span class="crayon-o">=</span><span class="crayon-s">'Image Orientation'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-92"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-s">'Image Orientation'</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">exifTags</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-93"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">imgOriList</span><span class="crayon-sy">.</span><span class="crayon-e">extend</span><span class="crayon-sy">(</span><span class="crayon-v">exifTags</span><span class="crayon-sy">[</span><span class="crayon-s">'Image Orientation'</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-v">values</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-94"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">except</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-95"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">pass</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-96">&nbsp;</div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-97"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">img</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Image</span><span class="crayon-sy">.</span><span class="crayon-k ">open</span><span class="crayon-sy">(</span><span class="crayon-v">IMGPATH</span><span class="crayon-o">+</span><span class="crayon-v">fn</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-98"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">w</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">h</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">img</span><span class="crayon-sy">.</span><span class="crayon-e">size</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-99"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">newName</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">str</span><span class="crayon-sy">(</span><span class="crayon-k ">uuid</span><span class="crayon-sy">.</span><span class="crayon-e">uuid4</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">+</span><span class="crayon-s">'.jpeg'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-100"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">w</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-v">h</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-101"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">wpercent</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">longedge</span><span class="crayon-o">/</span><span class="crayon-k ">float</span><span class="crayon-sy">(</span><span class="crayon-k ">w</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-102"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">hsize</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-k ">float</span><span class="crayon-sy">(</span><span class="crayon-v">h</span><span class="crayon-sy">)</span><span class="crayon-o">*</span><span class="crayon-k ">float</span><span class="crayon-sy">(</span><span class="crayon-v">wpercent</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-103"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">img</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">img</span><span class="crayon-sy">.</span><span class="crayon-e">resize</span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-v">longedge</span><span class="crayon-sy">,</span><span class="crayon-v">hsize</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">PIL</span><span class="crayon-sy">.</span><span class="crayon-v">Image</span><span class="crayon-sy">.</span><span class="crayon-v">ANTIALIAS</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-104"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-105"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">hpercent</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">longedge</span><span class="crayon-o">/</span><span class="crayon-k ">float</span><span class="crayon-sy">(</span><span class="crayon-v">h</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-106"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">wsize</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-k ">float</span><span class="crayon-sy">(</span><span class="crayon-k ">w</span><span class="crayon-sy">)</span><span class="crayon-o">*</span><span class="crayon-k ">float</span><span class="crayon-sy">(</span><span class="crayon-v">hpercent</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-107"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">img</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">img</span><span class="crayon-sy">.</span><span class="crayon-e">resize</span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-v">wsize</span><span class="crayon-sy">,</span><span class="crayon-v">longedge</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">PIL</span><span class="crayon-sy">.</span><span class="crayon-v">Image</span><span class="crayon-sy">.</span><span class="crayon-v">ANTIALIAS</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-108">&nbsp;</div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-109"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">val </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">imgOriList</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-110"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">val </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">orientDict</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-111"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">deg</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">flip</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">orientDict</span><span class="crayon-sy">[</span><span class="crayon-v">val</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-112"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">img</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">img</span><span class="crayon-sy">.</span><span class="crayon-e">rotate</span><span class="crayon-sy">(</span><span class="crayon-v">deg</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-113"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">flip</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-114"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">img</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">img</span><span class="crayon-sy">.</span><span class="crayon-e">transpose</span><span class="crayon-sy">(</span><span class="crayon-v">flip</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-115">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-116"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">img</span><span class="crayon-sy">.</span><span class="crayon-e">save</span><span class="crayon-sy">(</span><span class="crayon-v">IMGPATH</span><span class="crayon-o">+</span><span class="crayon-v">newName</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">format</span><span class="crayon-o">=</span><span class="crayon-s">'JPEG'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-117"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">os</span><span class="crayon-sy">.</span><span class="crayon-e">remove</span><span class="crayon-sy">(</span><span class="crayon-v">IMGPATH</span><span class="crayon-o">+</span><span class="crayon-v">fn</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-118"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-119"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">newName</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-120">&nbsp;</div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-121"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">chunks</span><span class="crayon-sy">(</span><span class="crayon-v">l</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-122"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"""Yield successive n-sized chunks from l."""</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-123"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-k ">xrange</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">l</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-124"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">yield</span><span class="crayon-h"> </span><span class="crayon-v">l</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-o">:</span><span class="crayon-v">i</span><span class="crayon-o">+</span><span class="crayon-v">n</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-125">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-126"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">get_tags</span><span class="crayon-sy">(</span><span class="crayon-v">fp</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-127"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">fileObj</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">open</span><span class="crayon-sy">(</span><span class="crayon-v">fp</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-128"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">clarifai_api</span><span class="crayon-sy">.</span><span class="crayon-e">tag_images</span><span class="crayon-sy">(</span><span class="crayon-v">fileObj</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-129"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">resultObj</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-sy">[</span><span class="crayon-s">'results'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-130"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tags</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">resultObj</span><span class="crayon-sy">[</span><span class="crayon-s">'result'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'tag'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'classes'</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-131"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">tags</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-132">&nbsp;</div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-133"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">genius_search</span><span class="crayon-sy">(</span><span class="crayon-v">tags</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-134"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">access_token</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'d2IuV9fGKzYEWVnzmLVtFnm-EYvBQKR8Uh3I1cfZOdr8j-BGVTPThDES532dym5a'</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-135"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">payload</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-136"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'q'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">' '</span><span class="crayon-sy">.</span><span class="crayon-e">join</span><span class="crayon-sy">(</span><span class="crayon-v">tags</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-137"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'access_token'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">access</span><span class="crayon-sy">_</span>token</div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-138"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-139"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">endpt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'http://api.genius.com/search'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-140"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">requests</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-v">endpt</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">params</span><span class="crayon-o">=</span><span class="crayon-v">payload</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-141"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">results</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-k ">json</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-142"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">hits</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">results</span><span class="crayon-sy">[</span><span class="crayon-s">'response'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'hits'</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-143"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-144"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">artists_titles</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-145"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-146"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">h</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">hits</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-147"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">hit_result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">h</span><span class="crayon-sy">[</span><span class="crayon-s">'result'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-148"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">hit_result</span><span class="crayon-sy">[</span><span class="crayon-s">'url'</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">endswith</span><span class="crayon-sy">(</span><span class="crayon-s">'lyrics'</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-149"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">artists_titles</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-150"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">(</span><span class="crayon-v">hit_result</span><span class="crayon-sy">[</span><span class="crayon-s">'primary_artist'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'name'</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">hit_result</span><span class="crayon-sy">[</span><span class="crayon-s">'title'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-151"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-152"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-153"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">artists_titles</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-154">&nbsp;</div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-155"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">spotify_search</span><span class="crayon-sy">(</span><span class="crayon-v">query</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-156"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">endpt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"https://api.spotify.com/v1/search"</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-157"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">payload</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-158"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'q'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">query</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-159"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'type'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'track'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-160"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-161"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">requests</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-v">endpt</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">params</span><span class="crayon-o">=</span><span class="crayon-v">payload</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-162"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-k ">json</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-163"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result_zero</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-sy">[</span><span class="crayon-s">'tracks'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'items'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-164"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-165"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">result_zero</span><span class="crayon-sy">[</span><span class="crayon-s">'uri'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-166">&nbsp;</div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-167"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-v">fn</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-168"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tags</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">get_tags</span><span class="crayon-sy">(</span><span class="crayon-v">IMGPATH</span><span class="crayon-o">+</span><span class="crayon-v">fn</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-169"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">tag_chunk </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">chunks</span><span class="crayon-sy">(</span><span class="crayon-v">tags</span><span class="crayon-sy">,</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-170"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">artists_titles</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">genius_search</span><span class="crayon-sy">(</span><span class="crayon-v">tag_chunk</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-171"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-v">artist</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">title </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">artists_titles</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-172"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-173"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result_uri</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">spotify_search</span><span class="crayon-sy">(</span><span class="crayon-v">artist</span><span class="crayon-o">+</span><span class="crayon-s">' '</span><span class="crayon-o">+</span><span class="crayon-v">title</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-174"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">except</span><span class="crayon-h"> </span><span class="crayon-k ">IndexError</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-175"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">pass</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-176"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-177"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">result_uri</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-178">&nbsp;</div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-179">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5d4ba58337bc9885757486-180"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">__name__</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">"__main__"</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5d4ba58337bc9885757486-181"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">run</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0553 seconds] -->
<p>&nbsp;</p>
<p>It uses the same algorithm discussed in <a href="index.html@p=687.html" target="_blank">my prior post</a>. Now that I have the opportunity to test it more, I am not quite satisfied with the results it is providing. First of all, they are not entirely deterministic (you can upload the same photo twice and end up with two different songs in some cases). Moreover, the results from a human face &#8212; which I expect to be a common use case &#8212; are not very personal. For the next steps in this project, I plan to integrate additional data including GPS, weather, time of day, and possibly even facial expressions in order to improve the output.</p>
<p>The broken cameras I ordered from eBay have arrived, and I have been considering how to use them as cases for the new models. I also purchased a GPS module for my Raspberry Pi, so the next Sound Camera prototype, with new features integrated, will likely be a physical version. I&#8217;m planning to use this Kodak Brownie camera (c. 1916):</p>
<p><a href="http://www.thehypertext.com/wp-content/uploads/2015/10/IMG_1207-e1444097935523.jpg"><img class="aligncenter size-large wp-image-736" src="http://www.thehypertext.com/wp-content/uploads/2015/10/IMG_1207-e1444097935523-1024x1024.jpg" alt="IMG_1207" width="610" height="610" /></a></p>
</div>
				<div class="post-footer"><strong>Tags: </strong><a href="tag/art/index.html" rel="tag">art</a>, <a href="tag/artifical-intelligence/index.html" rel="tag">artifical intelligence</a>, <a href="tag/clarifai/index.html" rel="tag">clarifai</a>, <a href="tag/code/index.html" rel="tag">code</a>, <a href="tag/gps/index.html" rel="tag">gps</a>, <a href="tag/image/index.html" rel="tag">image</a>, <a href="tag/interactive/index.html" rel="tag">interactive</a>, <a href="tag/neural-networks/index.html" rel="tag">neural networks</a>, <a href="tag/programming/index.html" rel="tag">programming</a>, <a href="tag/python/index.html" rel="tag">python</a>, <a href="tag/raspberry-pi/index.html" rel="tag">raspberry pi</a>, <a href="tag/sound-camera/index.html" rel="tag">sound camera</a>, <a href="tag/word-camera/index.html" rel="tag">word.camera</a></div>
							</div>
			<div class="post-navigation clear">
															<a class="post-prev" href="index.html@p=717.html"><em>Previous post</em><span>So it goes.</span></a>
																<a class="post-next" href="index.html@p=741.html"><em>Next post</em><span>Sound Camera, Part III</span></a>
									<div class="line"></div>
			</div>
		</div>

			

			</div>
			<!-- /Content -->

			<div class="sidebar">
    <div id="text-3" class="widget_text widget"><h3>About</h3><div class="widget-body clear">			
    <div class="textwidget"><p><img src="wp-content/uploads/2014/08/selfportrait_200px.jpg" alt="self portrait" width=200 /></p>
    <p><br></p>
    <p>My name is <a href="http://rossgoodwin.com">Ross Goodwin</a>. I am a creative technologist, data scientist, artist, and MPS candidate at NYU Tisch ITP. Before attending ITP, I was a ghostwriter in the Obama administration, then became interested in computer code and natural language processing. I earned my BS in economics from MIT in 2009.</p>
    <p><br></p>
    <p>This blog will consist (almost) entirely of ITP related projects &amp; work in progress.</p>
    </div>
    </div>
    </div>
	<div id="text-5" class="widget_text widget">
	    <h3>Twitter</h3>
	    <a class="twitter-timeline" href="https://twitter.com/rossgoodwin" data-widget-id="641439634627633152">Tweets by @rossgoodwin</a>
		<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
	</div>
	<div id="archives-7" class="widget_archive widget"><h3>Archive</h3><div class="widget-body clear">		<ul>
			<li><a href='2015/12/index.html'>December 2015</a>&nbsp;(2)</li>
	<li><a href='2015/11/index.html'>November 2015</a>&nbsp;(1)</li>
	<li><a href='2015/10/index.html'>October 2015</a>&nbsp;(5)</li>
	<li><a href='2015/09/index.html'>September 2015</a>&nbsp;(5)</li>
	<li><a href='2015/05/index.html'>May 2015</a>&nbsp;(2)</li>
	<li><a href='2015/04/index.html'>April 2015</a>&nbsp;(2)</li>
	<li><a href='2015/03/index.html'>March 2015</a>&nbsp;(1)</li>
	<li><a href='2015/02/index.html'>February 2015</a>&nbsp;(2)</li>
	<li><a href='2015/01/index.html'>January 2015</a>&nbsp;(1)</li>
	<li><a href='2014/12/index.html'>December 2014</a>&nbsp;(4)</li>
	<li><a href='2014/11/index.html'>November 2014</a>&nbsp;(5)</li>
	<li><a href='2014/10/index.html'>October 2014</a>&nbsp;(4)</li>
	<li><a href='2014/09/index.html'>September 2014</a>&nbsp;(7)</li>
	<li><a href='2014/08/index.html'>August 2014</a>&nbsp;(2)</li>
		</ul>
		</div></div><div id="categories-6" class="widget_categories widget"><h3>Categories</h3><div class="widget-body clear">		<ul>
	<li class="cat-item cat-item-33"><a href="category/fall-2014/index.html" title="ITP Courses Fall 2014">Fall 2014</a> (18)
<ul class='children'>
	<li class="cat-item cat-item-6"><a href="category/fall-2014/applications/index.html" title="Applications">Applications</a> (1)
</li>
	<li class="cat-item cat-item-5"><a href="category/fall-2014/automata/index.html" title="Automata: Telling Stories With Machines">Automata</a> (6)
</li>
	<li class="cat-item cat-item-4"><a href="category/fall-2014/cmedia/index.html" title="Introduction to Computational Media">Computational Media</a> (8)
</li>
	<li class="cat-item cat-item-7"><a href="category/fall-2014/network/index.html" title="Comm Lab: Networked Media">Networked Media</a> (2)
</li>
	<li class="cat-item cat-item-3"><a href="category/fall-2014/pcomp/index.html" title="Introduction to Physical Computing">Physical Computing</a> (6)
</li>
</ul>
</li>
	<li class="cat-item cat-item-160"><a href="category/fall-2015/index.html" title="ITP Courses Fall 2015">Fall 2015</a> (13)
<ul class='children'>
	<li class="cat-item cat-item-165"><a href="category/fall-2015/data-personal/index.html" title="Designing for Data Personalization">Data Personalization</a> (4)
</li>
	<li class="cat-item cat-item-164"><a href="category/fall-2015/learning-machines/index.html" title="Learning Machines">Learning Machines</a> (2)
</li>
	<li class="cat-item cat-item-162"><a href="category/fall-2015/a-to-z/index.html" title="Programming A to Z">Programming A to Z</a> (2)
</li>
	<li class="cat-item cat-item-161"><a href="category/fall-2015/project-dev/index.html" title="Project Development Studio">Project Development Studio</a> (6)
</li>
	<li class="cat-item cat-item-163"><a href="category/fall-2015/temp-exp/index.html" title="Temporary Expert">Temporary Expert</a> (3)
</li>
</ul>
</li>
	<li class="cat-item cat-item-119"><a href="category/spring-2015/index.html" title="ITP Courses Spring 2015">Spring 2015</a> (6)
<ul class='children'>
	<li class="cat-item cat-item-121"><a href="category/spring-2015/convo-comp/index.html" title="Conversation and Computation">Convo Comp</a> (3)
</li>
	<li class="cat-item cat-item-153"><a href="category/spring-2015/remix/index.html" title="this is the remix">Remix</a> (1)
</li>
	<li class="cat-item cat-item-120"><a href="category/spring-2015/sculpting-data/index.html" title="Sculpting Data Into Everyday Objects">Sculpting Data</a> (2)
</li>
	<li class="cat-item cat-item-122"><a href="category/spring-2015/storage-wars/index.html" title="Storage Wars: Narrating Data Archives">Storage Wars</a> (1)
</li>
</ul>
</li>
	<li class="cat-item cat-item-1"><a href="category/uncategorized/index.html" >Uncategorized</a> (7)
</li>
		</ul>
</div></div><div id="tag_cloud-5" class="widget_tag_cloud widget"><h3>Tags</h3><div class="widget-body clear"><div class="tagcloud"><a href="tag/3d/index.html" class="tag-cloud-link tag-link-84 tag-link-position-1" style="font-size: 9.6153846153846pt;" aria-label="3d (3 items)">3d</a>
<a href="tag/arduino/index.html" class="tag-cloud-link tag-link-66 tag-link-position-2" style="font-size: 14.326923076923pt;" aria-label="arduino (8 items)">arduino</a>
<a href="tag/art/index.html" class="tag-cloud-link tag-link-17 tag-link-position-3" style="font-size: 21.192307692308pt;" aria-label="art (28 items)">art</a>
<a href="tag/artifical-intelligence/index.html" class="tag-cloud-link tag-link-12 tag-link-position-4" style="font-size: 16.480769230769pt;" aria-label="artifical intelligence (12 items)">artifical intelligence</a>
<a href="tag/artificial-intelligence/index.html" class="tag-cloud-link tag-link-145 tag-link-position-5" style="font-size: 10.961538461538pt;" aria-label="artificial intelligence (4 items)">artificial intelligence</a>
<a href="tag/automata-2/index.html" class="tag-cloud-link tag-link-52 tag-link-position-6" style="font-size: 12.980769230769pt;" aria-label="automata (6 items)">automata</a>
<a href="tag/chess/index.html" class="tag-cloud-link tag-link-51 tag-link-position-7" style="font-size: 12.038461538462pt;" aria-label="chess (5 items)">chess</a>
<a href="tag/clarifai/index.html" class="tag-cloud-link tag-link-146 tag-link-position-8" style="font-size: 12.038461538462pt;" aria-label="clarifai (5 items)">clarifai</a>
<a href="tag/code/index.html" class="tag-cloud-link tag-link-15 tag-link-position-9" style="font-size: 21.596153846154pt;" aria-label="code (30 items)">code</a>
<a href="tag/code-poetry/index.html" class="tag-cloud-link tag-link-13 tag-link-position-10" style="font-size: 16.480769230769pt;" aria-label="code poetry (12 items)">code poetry</a>
<a href="tag/computational-media/index.html" class="tag-cloud-link tag-link-41 tag-link-position-11" style="font-size: 15.538461538462pt;" aria-label="computational media (10 items)">computational media</a>
<a href="tag/computer/index.html" class="tag-cloud-link tag-link-11 tag-link-position-12" style="font-size: 15pt;" aria-label="computer (9 items)">computer</a>
<a href="tag/data/index.html" class="tag-cloud-link tag-link-130 tag-link-position-13" style="font-size: 10.961538461538pt;" aria-label="data (4 items)">data</a>
<a href="tag/deep-learning/index.html" class="tag-cloud-link tag-link-186 tag-link-position-14" style="font-size: 9.6153846153846pt;" aria-label="deep learning (3 items)">deep learning</a>
<a href="tag/fiction/index.html" class="tag-cloud-link tag-link-98 tag-link-position-15" style="font-size: 13.653846153846pt;" aria-label="fiction (7 items)">fiction</a>
<a href="tag/fiction-generator/index.html" class="tag-cloud-link tag-link-101 tag-link-position-16" style="font-size: 10.961538461538pt;" aria-label="fiction generator (4 items)">fiction generator</a>
<a href="tag/flickr/index.html" class="tag-cloud-link tag-link-18 tag-link-position-17" style="font-size: 8pt;" aria-label="flickr (2 items)">flickr</a>
<a href="tag/generative/index.html" class="tag-cloud-link tag-link-16 tag-link-position-18" style="font-size: 17.019230769231pt;" aria-label="generative (13 items)">generative</a>
<a href="tag/gui/index.html" class="tag-cloud-link tag-link-69 tag-link-position-19" style="font-size: 10.961538461538pt;" aria-label="gui (4 items)">gui</a>
<a href="tag/image/index.html" class="tag-cloud-link tag-link-23 tag-link-position-20" style="font-size: 15.538461538462pt;" aria-label="image (10 items)">image</a>
<a href="tag/image-manipulation/index.html" class="tag-cloud-link tag-link-30 tag-link-position-21" style="font-size: 8pt;" aria-label="image manipulation (2 items)">image manipulation</a>
<a href="tag/interaction/index.html" class="tag-cloud-link tag-link-48 tag-link-position-22" style="font-size: 10.961538461538pt;" aria-label="interaction (4 items)">interaction</a>
<a href="tag/interactive/index.html" class="tag-cloud-link tag-link-45 tag-link-position-23" style="font-size: 16.076923076923pt;" aria-label="interactive (11 items)">interactive</a>
<a href="tag/interactivity/index.html" class="tag-cloud-link tag-link-46 tag-link-position-24" style="font-size: 10.961538461538pt;" aria-label="interactivity (4 items)">interactivity</a>
<a href="tag/itp/index.html" class="tag-cloud-link tag-link-21 tag-link-position-25" style="font-size: 16.480769230769pt;" aria-label="itp (12 items)">itp</a>
<a href="tag/keyboard/index.html" class="tag-cloud-link tag-link-93 tag-link-position-26" style="font-size: 9.6153846153846pt;" aria-label="keyboard (3 items)">keyboard</a>
<a href="tag/mechanical-turk/index.html" class="tag-cloud-link tag-link-50 tag-link-position-27" style="font-size: 12.038461538462pt;" aria-label="mechanical turk (5 items)">mechanical turk</a>
<a href="tag/mechanical-turks-ghost/index.html" class="tag-cloud-link tag-link-59 tag-link-position-28" style="font-size: 10.961538461538pt;" aria-label="mechanical turk&#039;s ghost (4 items)">mechanical turk&#039;s ghost</a>
<a href="tag/natural-language-generation/index.html" class="tag-cloud-link tag-link-35 tag-link-position-29" style="font-size: 16.076923076923pt;" aria-label="natural language generation (11 items)">natural language generation</a>
<a href="tag/natural-language-processing/index.html" class="tag-cloud-link tag-link-34 tag-link-position-30" style="font-size: 18.096153846154pt;" aria-label="natural language processing (16 items)">natural language processing</a>
<a href="tag/neural-networks/index.html" class="tag-cloud-link tag-link-184 tag-link-position-31" style="font-size: 12.038461538462pt;" aria-label="neural networks (5 items)">neural networks</a>
<a href="tag/novel-generator/index.html" class="tag-cloud-link tag-link-106 tag-link-position-32" style="font-size: 9.6153846153846pt;" aria-label="novel generator (3 items)">novel generator</a>
<a href="tag/photography/index.html" class="tag-cloud-link tag-link-19 tag-link-position-33" style="font-size: 12.980769230769pt;" aria-label="photography (6 items)">photography</a>
<a href="tag/physical-computing/index.html" class="tag-cloud-link tag-link-44 tag-link-position-34" style="font-size: 16.480769230769pt;" aria-label="physical computing (12 items)">physical computing</a>
<a href="tag/poem/index.html" class="tag-cloud-link tag-link-10 tag-link-position-35" style="font-size: 10.961538461538pt;" aria-label="poem (4 items)">poem</a>
<a href="tag/poetry/index.html" class="tag-cloud-link tag-link-9 tag-link-position-36" style="font-size: 12.980769230769pt;" aria-label="poetry (6 items)">poetry</a>
<a href="tag/processing/index.html" class="tag-cloud-link tag-link-38 tag-link-position-37" style="font-size: 15pt;" aria-label="processing (9 items)">processing</a>
<a href="tag/programming/index.html" class="tag-cloud-link tag-link-28 tag-link-position-38" style="font-size: 22pt;" aria-label="programming (32 items)">programming</a>
<a href="tag/python/index.html" class="tag-cloud-link tag-link-14 tag-link-position-39" style="font-size: 21.057692307692pt;" aria-label="python (27 items)">python</a>
<a href="tag/raspberry-pi/index.html" class="tag-cloud-link tag-link-60 tag-link-position-40" style="font-size: 15pt;" aria-label="raspberry pi (9 items)">raspberry pi</a>
<a href="tag/sound-camera/index.html" class="tag-cloud-link tag-link-183 tag-link-position-41" style="font-size: 10.961538461538pt;" aria-label="sound camera (4 items)">sound camera</a>
<a href="tag/stenographer/index.html" class="tag-cloud-link tag-link-92 tag-link-position-42" style="font-size: 9.6153846153846pt;" aria-label="stenographer (3 items)">stenographer</a>
<a href="tag/typing/index.html" class="tag-cloud-link tag-link-94 tag-link-position-43" style="font-size: 9.6153846153846pt;" aria-label="typing (3 items)">typing</a>
<a href="tag/visualization/index.html" class="tag-cloud-link tag-link-42 tag-link-position-44" style="font-size: 12.980769230769pt;" aria-label="visualization (6 items)">visualization</a>
<a href="tag/word-camera/index.html" class="tag-cloud-link tag-link-149 tag-link-position-45" style="font-size: 14.326923076923pt;" aria-label="word.camera (8 items)">word.camera</a></div>
</div></div></div>

			</div>
			<!-- /Container -->

			<div class="footer">
				<p class="copyright">&copy; 2014 <a href="index.html">THE HYPERTEXT</a>.
					All Rights Reserved.<br />
				</p>
			</div>
		</div>
		<!-- Page generated: 0.649 s, 30 queries -->
		<script type='text/javascript' src='wp-content/themes/sight/js/script.js@ver=20131219'></script>

			</body>
</html>
